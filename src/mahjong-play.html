<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../bower_components/polymer/polymer.html">

<link rel="import" href="shared-styles.html">
<link rel="import" href="mahjong-icons.html">
<link rel="import" href="../images/tiles.svg">

<link rel="import" href="../bower_components/paper-menu-button/paper-menu-button.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/paper-item/paper-item.html">
<link rel="import" href="../bower_components/paper-dialog/paper-dialog.html">

<dom-module id="mahjong-play" seed="{{seed}}">
  <template>
    <style include="shared-styles">
      :host {
        --app-primary-color: #4285f4;
        --app-secondary-color: black;
	display: block;
	padding: 10px;
	html, body { margin:0; padding:0; overflow:hidden; }
      }
      #mahjong {
        position:relative; top:0px; left:0px; width:100%; height:100%;
        background-color: #323657;
      }
      paper-menu-button {
        position:absolute; top:2px; left:2px;
      }
      paper-menu-button paper-icon-button {
        color: white;
        --paper-icon-button-ink-color: white;
      }

    </style>

    <div id="mahjong"></div>
    <paper-menu-button id="menubutton">
      <paper-icon-button icon="menu" class="dropdown-trigger"></paper-icon-button>
      <paper-menu class="dropdown-content">
	<paper-item id="new_game" on-tap="menu_new" disabled>New</paper-item>
	<paper-item id="restart_game" on-tap="menu_restart" disabled>Restart</paper-item>
	<paper-item id="undo_move" on-tap="menu_undo" disabled>Undo</paper-item>
	<paper-item id="redo_move" on-tap="menu_redo" disabled>Redo</paper-item>
      </paper-menu>
    </paper-menu-button>

    <paper-dialog id="youlose" modal>
      <h2>There are no more moves.</h2>
      <p>Each puzzle has at least one solution.
	You can undo your moves and try to find the solution,
	start the game over,
	or start a new game.</p>
      <div class="buttons">
	<paper-button raised dialog-confirm on-tap="dialog_undo">Undo</paper-button>
	<paper-button raised dialog-confirm on-tap="dialog_restart">Restart</paper-button>
	<paper-button raised dialog-confirm on-tap="dialog_new">New Game</paper-button>
      </div>
    </paper-dialog>
      
    <paper-dialog id="youwin" modal>
      <h2>You have won the game</h2>
      <div class="buttons">
	<paper-button raised dialog-confirm on-tap="dialog_undo">Undo</paper-button>
	<paper-button raised dialog-confirm on-tap="dialog_restart">Restart</paper-button>
	<paper-button raised dialog-confirm on-tap="dialog_new">New Game</paper-button>
      </div>
    </paper-dialog>
    
  </template>

  <script src="alea.js"></script>
  <script src="svg4everybody.js"></script>
  <script src="mahjong-play.js"></script>
</dom-module>
